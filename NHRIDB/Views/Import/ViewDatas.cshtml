@model  NHRIDB.Models.ViewModels.ViewDatasViewModel
@{
    ViewBag.Title = "匯入資料明細";
}
@using (Html.BeginForm("SaveData", "Import", FormMethod.Post))
{

    @Html.AntiForgeryToken()
    <div class="text-danger">
        @Html.ValidationSummary()
        @*@Html.ValidationMessageFor(model => model.gName, "", new { @class = "text-danger" })*@
        @Html.HiddenFor(e=>e.fileName)
        @Html.HiddenFor(e=>e.hId)
    </div>
    <table class="table table-hover table-bordered">
        <thead>
            <tr>
                @foreach (var column in Model.columns)
                {
                    <th>@column.DisplayName</th>
                }

            </tr>
        </thead>


        @for (int i = 0; i < Model.datas.Count; i++)
        {
            var item = Model.datas[i];
    <tr>
        @foreach (var column in Model.columns)
        {

            var value = item.GetType().GetProperty(column.Name).GetValue(item);
            string showText = "";
            if (column.PropertyType.Name.Equals("Boolean"))
            {

                showText = bool.Parse(value.ToString()) ? "1" : "0";
        <td>
            @showText
            @Html.Hidden("datas[" + i.ToString() + "]." + column.Name, value)
        </td>
            }
            else {
    <td>
        @value
        @Html.Hidden("datas[" + i.ToString() + "]." + column.Name, value)
    </td>
            }

 

        }
    </tr>
        }

    </table>

   <a class="btn" href="@Url.Action("Index")">取消</a> <button class="btn" type="submit">儲存</button>
}

